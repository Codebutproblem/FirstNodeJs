extends ../../layouts/default.pug
include ../../mixins/alert.pug
block main
    h1(class="mb-4") Danh sách tài khoản 
    +alert-success(5000)
    +alert-error(5000)
    .card.mb-3 
        .card-header Danh sách
        .card-body
            .row 
                .col-8 
                .col-4.text-end 
                    a(
                        href=`${prefixAdmin}/accounts/create`
                        class="btn btn-outline-success"
                    ) + Thêm mới
            table(
                class="table table-hover table-sm"
            )
                thead 
                    tr 
                        th STT 
                        th Avatar 
                        th Họ tên 
                        th Phân quyền 
                        th Email 
                        th Trạng thái 
                        th Hành động
                tbody 
                    each item,index in records
                        tr 
                            td #{index+1}
                            td 
                                img(
                                    src=item.avatar
                                    alt=item.fullName 
                                    width="100px"
                                    height="auto"
                                )
                            td #{item.fullName}
                            td #{item.role.title}
                            td #{item.email}
                            td 
                                if (item.status == "active")
                                    a(href="javascript:;" class= "btn btn-success" button-change-status item-id= item.id item-status= item.status) Hoạt động
                                else
                                    a(href="javascript:;" class= "btn btn-danger" button-change-status item-id = item.id item-status= item.status) Dừng hoạt động
                            td 
                                a(href=`${prefixAdmin}/accounts/edit/${item.id}` class= "btn btn-warning btn-sm") Sửa
                                button(class= "btn btn-danger btn-sm ms-1" data-id=item.id delete-item-button) Xóa
    form(action="", method="POST" id= "form-delete-item" data-path= `${prefixAdmin}/accounts/delete`)

